import{J as v,d as Q,r as g,G as W,e as l,o as _,v as w,w as t,g as e,h as r,m as V,C as b,j as c,t as k,f as z,F as I,q as N,K as h,p as X,k as Y,_ as Z}from"./index-afa834e1.js";const ee=(n,s)=>v.get(`/admin/product/list/${n}/${s}`),te=n=>v.get("/admin/product/onSale/"+n),ae=n=>v.get("/admin/product/cancelSale/"+n),le=n=>v.get("/admin/product/getSkuInfo/"+n),ne=n=>v.delete("/admin/product/deleteSku/"+n),oe=n=>(X("data-v-3c71e101"),n=n(),Y(),n),se=["src"],ue=oe(()=>V("h4",null,"查看商品的详情",-1)),pe=["src"],re=Q({__name:"index",setup(n){let s=g(1),x=g(5),q=g(0),C=g([]),y=g(!1),i=g({});W(()=>{m()});const m=async(p=1)=>{s.value=p;let o=await ee(s.value,x.value);o.code==200&&(q.value=o.data.total,C.value=o.data.records)},L=p=>{m()},$=async p=>{p.isSale==1?(await ae(p.id),h({type:"success",message:"下架成功"}),m(s.value)):(await te(p.id),h({type:"success",message:"上架成功"}),m(s.value))},A=()=>{h({type:"success",message:"程序员在努力的更新中...."})},E=async p=>{y.value=!0;let o=await le(p.id);i.value=o.data},U=async p=>{(await ne(p)).code==200?(h({type:"success",message:"删除成功"}),m(C.value.length>1?s.value:s.value-1)):h({type:"error",message:"系统数据不能删除"})};return(p,o)=>{const d=l("el-table-column"),S=l("el-button"),j=l("Edit"),F=l("el-icon"),M=l("InfoFilled"),R=l("el-popconfirm"),T=l("el-table"),G=l("el-pagination"),u=l("el-col"),f=l("el-row"),B=l("el-tag"),H=l("el-carousel-item"),J=l("el-carousel"),K=l("el-drawer"),P=l("el-card");return _(),w(P,null,{default:t(()=>[e(T,{border:"",style:{margin:"10px 0px"},data:r(C)},{default:t(()=>[e(d,{label:"序号",type:"index",align:"center",width:"80px"}),e(d,{label:"名称","show-overflow-tooltip":"",width:"150px",prop:"skuName"}),e(d,{label:"描述","show-overflow-tooltip":"",width:"150px",prop:"skuDesc"}),e(d,{label:"图片",width:"150px"},{default:t(({row:a,$index:O})=>[V("img",{src:a.skuDefaultImg,alt:"",style:{width:"100px",height:"100px"}},null,8,se)]),_:1}),e(d,{label:"重量",width:"150px",prop:"weight"}),e(d,{label:"价格",width:"150px",prop:"price"}),e(d,{label:"操作",width:"250px",fixed:"right"},{default:t(({row:a,$index:O})=>[e(S,{type:"primary",size:"small",icon:a.isSale==1?"Bottom":"Top",onClick:D=>$(a)},null,8,["icon","onClick"]),e(S,{type:"primary",size:"small",color:"#FF8800",onClick:A},{default:t(()=>[e(F,{color:"white"},{default:t(()=>[e(j)]),_:1})]),_:1}),e(S,{type:"primary",size:"small",color:"#888888",onClick:D=>E(a)},{default:t(()=>[e(F,{color:"white"},{default:t(()=>[e(M)]),_:1})]),_:2},1032,["onClick"]),e(R,{title:`你确定要删除${a.skuName}?`,width:"200px",onConfirm:D=>U(a.id)},{reference:t(()=>[e(S,{type:"primary",size:"small",color:"#CC0000",icon:"Delete"})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(G,{"current-page":r(s),"onUpdate:currentPage":o[0]||(o[0]=a=>b(s)?s.value=a:s=a),"page-size":r(x),"onUpdate:pageSize":o[1]||(o[1]=a=>b(x)?x.value=a:x=a),"page-sizes":[10,20,30,40],background:!0,layout:"prev, pager, next, jumper,->,sizes,total",total:r(q),onCurrentChange:m,onSizeChange:L},null,8,["current-page","page-size","total"]),e(K,{modelValue:r(y),"onUpdate:modelValue":o[2]||(o[2]=a=>b(y)?y.value=a:y=a)},{header:t(()=>[ue]),default:t(()=>[e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[c("名称")]),_:1}),e(u,{span:18},{default:t(()=>[c(k(r(i).skuName),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[c("描述")]),_:1}),e(u,{span:18},{default:t(()=>[c(k(r(i).skuDesc),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[c("价格")]),_:1}),e(u,{span:18},{default:t(()=>[c(k(r(i).price),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[c("平台属性")]),_:1}),e(u,{span:18},{default:t(()=>[(_(!0),z(I,null,N(r(i).skuAttrValueList,a=>(_(),w(B,{style:{margin:"5px"},key:a.id},{default:t(()=>[c(k(a.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[c("销售属性")]),_:1}),e(u,{span:18},{default:t(()=>[(_(!0),z(I,null,N(r(i).skuSaleAttrValueList,a=>(_(),w(B,{style:{margin:"5px"},key:a.id},{default:t(()=>[c(k(a.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[c("商品图片")]),_:1}),e(u,{span:18},{default:t(()=>[e(J,{interval:4e3,type:"card",height:"200px"},{default:t(()=>[(_(!0),z(I,null,N(r(i).skuImageList,a=>(_(),w(H,{key:a.id},{default:t(()=>[V("img",{src:a.imgUrl,alt:"",style:{width:"100%",height:"100%"}},null,8,pe)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});const ie=Z(re,[["__scopeId","data-v-3c71e101"]]);export{ie as default};
